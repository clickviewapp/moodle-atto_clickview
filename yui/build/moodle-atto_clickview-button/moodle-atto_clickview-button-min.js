YUI.add("moodle-atto_clickview-button",function(o,t){var n="atto_clickview",i="";o.namespace("M.atto_clickview").Button=o.Base.create("button",o.M.editor_atto.EditorPlugin,[],{initializer:function(t){i=t.iframe,this._onlineUrl=t.hostlocation,this._iframeUrl=t.iframeurl,this._consumerKey=t.consumerkey,this._schoolId=t.schoolid,this.addButton({icon:"icon",iconComponent:n,callback:this._displayDialogue,tags:"iframe"})},_displayDialogue:function(){var o,t,e,i;(t=(o=this).getDialogue({headerContent:M.util.get_string("pluginname",n),width:"auto",focusAfterHide:!0})).set("bodyContent",this._getDialogueContent()).show(),e=document.getElementById(n+"_iframe"),(i=new CVEventsApi(e.contentWindow)).on("cv-lms-addvideo",function(t,e){o._insertVideo(e.embedHtml),i.off("cv-lms-addvideo")},!0),t.on("visibleChange",function(t){!1===t.newVal&&i.off("cv-lms-addvideo")})},_insertVideo:function(t){var e=this.get("host");this.getDialogue({focusAfterHide:null}).hide(),e.insertContentAtFocusPoint(t),this.markUpdated()},_getDialogueContent:function(){var t,e;return t=this._onlineUrl+this._iframeUrl+"?consumerKey="+this._consumerKey,this._schoolId&&(t+="&schoolId="+this._schoolId),e=o.Handlebars.compile(i),o.Node.create(e({component:n,url:t}))}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});