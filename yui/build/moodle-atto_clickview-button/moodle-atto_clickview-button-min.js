YUI.add("moodle-atto_clickview-button",function(i,t){var n="atto_clickview",o="";i.namespace("M.atto_clickview").Button=i.Base.create("button",i.M.editor_atto.EditorPlugin,[],{initializer:function(t){o=t.iframe,this._onlineUrl=t.hostlocation,this._iframeUrl=t.iframeurl,this._consumerKey=t.consumerkey,this._schoolId=t.schoolid,this.addButton({icon:"icon",iconComponent:n,callback:this._displayDialogue,tags:"iframe"})},_displayDialogue:function(){var i,t,e,o;(t=(i=this).getDialogue({headerContent:M.util.get_string("pluginname",n),width:"816",focusAfterHide:!0})).set("bodyContent",this._getDialogueContent()).show(),e=document.getElementById("clickview_iframe"),(o=new CVEventsApi(e.contentWindow)).on("cv-lms-addvideo",function(t,e){i._insertVideo(e.embedHtml),o.off("cv-lms-addvideo")},!0),t.on("visibleChange",function(t){!1===t.newVal&&o.off("cv-lms-addvideo")})},_insertVideo:function(t){var e=this.get("host");this.getDialogue({focusAfterHide:null}).hide(),e.insertContentAtFocusPoint(t),this.markUpdated()},_getDialogueContent:function(){var t,e;return t=this._onlineUrl+this._iframeUrl+"?consumerKey="+this._consumerKey,this._schoolId&&(t+="&schoolId="+this._schoolId),e=i.Handlebars.compile(o),i.Node.create(e({component:n,url:t}))}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});