YUI.add("moodle-atto_clickview-button",function(i,t){var n="atto_clickview",o="";i.namespace("M.atto_clickview").Button=i.Base.create("button",i.M.editor_atto.EditorPlugin,[],{initializer:function(t){o=t.iframe,this._onlineUrl=t.hostlocation,this._iframeUrl=t.iframeurl,this._consumerKey=t.consumerkey,this._schoolId=t.schoolid,this.addButton({icon:"icon",iconComponent:n,callback:this._displayDialogue,tags:"iframe"})},_displayDialogue:function(){var t,i,o=this,e=this.getDialogue({headerContent:M.util.get_string("pluginname",n),width:"816",focusAfterHide:!0});e.set("bodyContent",this._getDialogueContent()).show(),t=document.getElementById("clickview_iframe"),(i=new CVEventsApi(t.contentWindow)).on("cv-lms-addvideo",function(t,e){o._insertVideo(e.embedHtml),i.off("cv-lms-addvideo")},!0),e.on("visibleChange",function(t){!1===t.newVal&&i.off("cv-lms-addvideo")})},_insertVideo:function(t){var e=this.get("host");this.getDialogue({focusAfterHide:null}).hide(),e.insertContentAtFocusPoint(t),this.markUpdated()},_getDialogueContent:function(){var t,e=this._onlineUrl+this._iframeUrl+"?consumerKey="+this._consumerKey;return this._schoolId&&(e+="&schoolId="+this._schoolId),t=i.Handlebars.compile(o),i.Node.create(t({component:n,url:e}))}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});