YUI.add("moodle-atto_clickview-button",function(i,t){var a="atto_clickview";i.namespace("M.atto_clickview").Button=i.Base.create("button",i.M.editor_atto.EditorPlugin,[],{initializer:function(i){this._onlineUrl=i.hostlocation,this._iframeUrl=i.iframeurl,this._consumerKey=i.consumerkey,this._schoolId=i.schoolid,this.addButton({callback:this._displayDialog,iconurl:this._onlineUrl+"/Assets/images/icons/cv-logo.png",tags:"iframe",icon:"icon",iconComponent:a})},_displayDialog:function(){var o,e,i,n,s=this.getDialogue({headerContent:M.util.get_string("pluginname",a),width:"824px"});s.set("bodyContent",'<iframe id="cv-plugin-frame" src="'+this._onlineUrl+this._iframeUrl+"?consumerKey="+this._consumerKey+"&schoolId="+this._schoolId+'" width="800" height="494" frameborder="0"></iframe>').show(),o=this.get("host"),e=this,i=document.getElementById("cv-plugin-frame"),(n=new CVEventsApi(i.contentWindow)).on("cv-lms-addvideo",function(i,t){o.insertContentAtFocusPoint(t.embedHtml),s.hide(),n.off("cv-lms-addvideo"),e.markUpdated()},!0),s.on("visibleChange",function(i){!1===i.newVal&&n.off("cv-lms-addvideo")})}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});