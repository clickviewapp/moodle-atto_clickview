YUI.add("moodle-atto_clickview-button",function(t,i){var s="atto_clickview";t.namespace("M.atto_clickview").Button=t.Base.create("button",t.M.editor_atto.EditorPlugin,[],{initializer:function(t){this._onlineUrl=t.hostlocation,this._iframeUrl=t.iframeurl,this._consumerKey=t.consumerkey,this._schoolId=t.schoolid,this.addButton({icon:"icon",iconComponent:s,callback:this._displayDialog,tags:"iframe"})},_displayDialog:function(){var e,o,t,n,a=this.getDialogue({headerContent:M.util.get_string("pluginname",s),width:"824px"});a.set("bodyContent",'<iframe id="cv-plugin-frame" src="'+this._onlineUrl+this._iframeUrl+"?consumerKey="+this._consumerKey+"&schoolId="+this._schoolId+'" width="800" height="494" frameborder="0"></iframe>').show(),e=this.get("host"),o=this,t=document.getElementById("cv-plugin-frame"),(n=new CVEventsApi(t.contentWindow)).on("cv-lms-addvideo",function(t,i){e.insertContentAtFocusPoint(i.embedHtml),a.hide(),n.off("cv-lms-addvideo"),o.markUpdated()},!0),a.on("visibleChange",function(t){!1===t.newVal&&n.off("cv-lms-addvideo")})}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});